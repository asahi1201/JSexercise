/* global describe:true it:true*/

const fs = require('fs');
const path = require('path');
const {expect: chaiExpect} = require('chai');
const eslintConfig = require('../index.js');

describe('验证属性无缺失', () => {
  it('配置包含 extends 属性', () => {
    chaiExpect(eslintConfig).to.have.property('extends');
  });
  it('配置包含 parserOptions 属性', () => {
    chaiExpect(eslintConfig).to.have.property('parserOptions');
  });
  it('配置包含 env 属性', () => {
    chaiExpect(eslintConfig).to.have.property('env');
  });
});

describe('验证所有rules均已加载', () => {
  const ARRAY_UNDEFINED_INDEX = -1;
  it('eslintConfig.indexOf(rules 文件名) 均 > -1', () => {
    fs.readdirSync(path.join(__dirname, '../rules')).forEach((name) => {
      chaiExpect(eslintConfig.extends.indexOf(`./rules/${name}`))
        .to
        .be
        .above(ARRAY_UNDEFINED_INDEX);
    });
  });
  it('eslintConfig 包含 eslint:recommended', () => {
    chaiExpect(eslintConfig.extends).to.contain('eslint:recommended');
  });
});



